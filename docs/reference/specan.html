<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Measure acoustic parameters in batches of sound files — specan • warbleR</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Measure acoustic parameters in batches of sound files — specan" />

<meta property="og:description" content="specan measures acoustic parameters on acoustic signals for which the start and end times 
are provided." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">warbleR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.1.15</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/warbleR_workflow_01.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Import sound files and select signals&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_02.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Visual inspection and signal classification&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_03.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Acoustic (dis)similarity, coordinated singing and simulating songs&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Measure acoustic parameters in batches of sound files</h1>
    
    <div class="hidden name"><code>specan.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>specan</code> measures acoustic parameters on acoustic signals for which the start and end times 
are provided.</p>
    
    </div>

    <pre class="usage"><span class='fu'>specan</span>(<span class='no'>X</span>, <span class='kw'>bp</span> <span class='kw'>=</span> <span class='st'>"frange"</span>, <span class='kw'>wl</span> <span class='kw'>=</span> <span class='fl'>512</span>, <span class='kw'>wl.freq</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>threshold</span> <span class='kw'>=</span> <span class='fl'>15</span>,
 <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>fast</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>pb</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>ovlp</span> <span class='kw'>=</span> <span class='fl'>50</span>,
<span class='kw'>wn</span> <span class='kw'>=</span> <span class='st'>"hanning"</span>, <span class='kw'>fsmooth</span> <span class='kw'>=</span> <span class='fl'>0.1</span>, <span class='kw'>harmonicity</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>nharmonics</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>X</th>
      <td><p>'selection_table', 'extended_selection_table' or data frame with the following columns: 1) "sound.files": name of the .wav 
files, 2) "sel": number of the selections, 3) "start": start time of selections, 4) "end": 
end time of selections. The ouptut of <code><a href='manualoc.html'>manualoc</a></code> or <code><a href='autodetec.html'>autodetec</a></code> can
be used as the input data frame.</p></td>
    </tr>
    <tr>
      <th>bp</th>
      <td><p>A numeric vector of length 2 for the lower and upper limits of a 
frequency bandpass filter (in kHz) or "frange" (default) to indicate that values in bottom.freq
and top.freq columns will be used as bandpass limits.  Lower limit of
 bandpass filter is not applied to fundamental frequencies.</p></td>
    </tr>
    <tr>
      <th>wl</th>
      <td><p>A numeric vector of length 1 specifying the spectrogram window length. Default is 512. See 'wl.freq' for setting windows length independenlty in the frequency domain.</p></td>
    </tr>
    <tr>
      <th>wl.freq</th>
      <td><p>A numeric vector of length 1 specifying the window length of the spectrogram
for measurements on the frecuency spectrum. Default is 512. Higher values would provide 
more accurate measurements. Note that this allows to increase measurement precision independently in the time and frequency domain. If <code>NULL</code> (default) then the 'wl' value is used.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>amplitude threshold (%) for fundamental frequency and 
dominant frequency detection. Default is 15.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>Numeric. Controls whether parallel computing is applied.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing).</p></td>
    </tr>
    <tr>
      <th>fast</th>
      <td><p>Logical. If <code>TRUE</code> (default) then the peakf acoustic parameter (see below) is not computed, which 
substantially increases performance (~9 times faster). This argument will be removed in future version.</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p>Character string containing the directory path where the sound files are located. 
If <code>NULL</code> (default) then the current working directory is used.</p></td>
    </tr>
    <tr>
      <th>pb</th>
      <td><p>Logical argument to control progress bar and messages. Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>ovlp</th>
      <td><p>Numeric vector of length 1 specifying % of overlap between two 
consecutive windows, used for fundamental frequency (using <code><a href='http://www.rdocumentation.org/packages/seewave/topics/fund'>fund</a></code> or <code><a href='http://www.rdocumentation.org/packages/tuneR/topics/FF'>FF</a></code>) and dominant frequency (using <code><a href='http://www.rdocumentation.org/packages/seewave/topics/dfreq'>dfreq</a></code>). 
Default is 50.</p></td>
    </tr>
    <tr>
      <th>wn</th>
      <td><p>Character vector of length 1 specifying window name. Default is hanning'. 
See function <code><a href='http://www.rdocumentation.org/packages/seewave/topics/ftwindow'>ftwindow</a></code> for more options.</p></td>
    </tr>
    <tr>
      <th>fsmooth</th>
      <td><p>A numeric vector of length 1 to smooth the frequency spectrum with a mean
sliding window (in kHz) used for mean peak frequency detection. This help to average 
amplitude "hills" to minimize the effect of amplitude modulation. Default is 0.1.</p></td>
    </tr>
    <tr>
      <th>harmonicity</th>
      <td><p>Logical. If <code>TRUE</code> harmonicity related parameters (fundamental frequency parameters [meanfun, minfun, maxfun], hn_freq, 
hn_width, harmonics and HNR) are measured. Note that measuring these parameters 
considerably increases computing time.</p></td>
    </tr>
    <tr>
      <th>nharmonics</th>
      <td><p>Numeric vector of length 1 setting the number of harmonics to analyze.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional parameters to be passed to <code><a href='http://www.rdocumentation.org/packages/soundgen/topics/analyze'>analyze</a></code>, which measures parameters related to harmonicity.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Data frame with 'sound.files' and 'selec' as in the input data frame, plus the following acoustic parameters:</p><ul>
<li><p><code>duration</code>: length of signal (in s)</p></li>
<li><p><code>meanfreq</code>: mean frequency. Weighted average of frequency by amplitude (in kHz)</p></li>
<li><p><code>sd</code>: standard deviation of frequency weighted by amplitude</p></li>
<li><p><code>freq.median</code>: median frequency. The frequency at which the signal is divided in two frequency
   intervals of equal energy (in kHz)</p></li>
<li><p><code>freq.Q25</code>: first quartile frequency. The frequency at which the signal is divided in two 
   frequency intervals of 25% and 75% energy respectively (in kHz)</p></li>
<li><p><code>freq.Q75</code>: third quartile frequency. The frequency at which the signal is divided in two
   frequency intervals of 75% and 25% energy respectively (in kHz)</p></li>
<li><p><code>freq.IQR</code>: interquartile frequency range. Frequency range between 'freq.Q25' and 'freq.Q75' 
   (in kHz)</p></li>
<li><p><code>time.median</code>: median time. The time at which the signal is divided in two time
   intervals of equal energy (in s)</p></li>
<li><p><code>time.Q25</code>: first quartile time. The time at which the signal is divided in two
time intervals of 25% and 75% energy respectively (in s). See <code><a href='http://www.rdocumentation.org/packages/seewave/topics/acoustat'>acoustat</a></code></p></li>
<li><p><code>time.Q75</code>: third quartile time. The time at which the signal is divided in two
   time intervals of 75% and 25% energy respectively (in s). See <code><a href='http://www.rdocumentation.org/packages/seewave/topics/acoustat'>acoustat</a></code></p></li>
<li><p><code>time.IQR</code>: interquartile time range. Time range between 'time.Q25' and 'time.Q75' 
   (in s). See <code><a href='http://www.rdocumentation.org/packages/seewave/topics/acoustat'>acoustat</a></code></p></li>
<li><p><code>skew</code>: skewness. Asymmetry of the spectrum (see note in <code><a href='http://www.rdocumentation.org/packages/seewave/topics/specprop'>specprop</a></code> description)</p></li>
<li><p><code>kurt</code>: kurtosis. Peakedness of the spectrum (see note in <code><a href='http://www.rdocumentation.org/packages/seewave/topics/specprop'>specprop</a></code> description)</p></li>
<li><p><code>sp.ent</code>: spectral entropy. Energy distribution of the frequency spectrum. Pure tone ~ 0; 
   noisy ~ 1. See <code><a href='http://www.rdocumentation.org/packages/seewave/topics/sh'>sh</a></code></p></li>
<li><p><code>time.ent</code>: time entropy. Energy distribution on the time envelope. Pure tone ~ 0; 
   noisy ~ 1. See <code><a href='http://www.rdocumentation.org/packages/seewave/topics/th'>th</a></code></p></li>
<li><p><code>entropy</code>: spectral entropy. Product of time and spectral entropy <code>sp.ent * time.ent</code>. 
   See <code><a href='http://www.rdocumentation.org/packages/seewave/topics/H'>H</a></code></p></li>
<li><p><code>sfm</code>: spectral flatness. Similar to sp.ent (Pure tone ~ 0; 
   noisy ~ 1). See <code><a href='http://www.rdocumentation.org/packages/seewave/topics/sfm'>sfm</a></code></p></li>
<li><p><code>meanfun</code>: average of fundamental frequency measured across the acoustic signal</p></li>
<li><p><code>minfun</code>: minimum fundamental frequency measured across the acoustic signal</p></li>
<li><p><code>maxfun</code>: maximum fundamental frequency measured across the acoustic signal</p></li>
<li><p><code>meandom</code>: average of dominant frequency measured across the acoustic signal</p></li>
<li><p><code>mindom</code>: minimum of dominant frequency measured across the acoustic signal</p></li>
<li><p><code>maxdom</code>: maximum of dominant frequency measured across the acoustic signal</p></li>
<li><p><code>dfrange</code>: range of dominant frequency measured across the acoustic signal</p></li>
<li><p><code>modindx</code>: modulation index. Calculated as the cumulative absolute
     difference between adjacent measurements of dominant frequencies divided
     by the dominant frequency range. 1 means the signals is not modulated.</p></li>
<li><p><code>startdom</code>:  dominant frequency measurement at the start of the signal</p></li>
<li><p><code>enddom</code>: dominant frequency measurement at the end of the signal</p></li>
<li><p><code>dfslope</code>: slope of the change in dominant frequency through time ((enddom-startdom)/duration). Units are kHz/s.</p></li>
<li><p><code>peakf</code>: peak frequency. Frequency with the highest energy. This 
   parameter can take a considerable amount of time to measure. It's only 
   generated if <code>fast = FALSE</code>. It provides a more accurate measure of peak
   frequency than 'meanpeakf' but can be more easily affected by background noise.</p></li>
<li><p><code>meanpeakf</code>: mean peak frequency. Frequency with highest energy from the 
   mean frequency spectrum (see <code><a href='http://www.rdocumentation.org/packages/seewave/topics/meanspec'>meanspec</a></code>). Typically more consistent than peakf.</p></li>
<li><p><code>hn_freq</code>: mean frequency of the 'n' upper harmonics (kHz) (see <code><a href='http://www.rdocumentation.org/packages/soundgen/topics/analyze'>analyze</a></code>). 
   Number of harmonics is defined with the argument 'nharmonics'.</p></li>
<li><p><code>hn_width</code>: mean bandwidth of the 'n' upper harmonics (kHz) (see <code><a href='http://www.rdocumentation.org/packages/soundgen/topics/analyze'>analyze</a></code>). Number of harmonics is defined with the argument 'nharmonics'.</p></li>
<li><p><code>harmonics</code>: the amount of energy in upper harmonics, namely the 
   ratio of total spectral power above 1.25 x F0 to the total spectral power 
   below 1.25 x F0 (dB) (see <code><a href='http://www.rdocumentation.org/packages/soundgen/topics/analyze'>analyze</a></code>). Number of 
   harmonics is defined with the argument 'nharmonics'.</p></li>
<li><p><code>HNR</code>: harmonics-to-noise ratio (dB). A measure of the harmonic content generated by <code><a href='http://www.rdocumentation.org/packages/soundgen/topics/getPitchAutocor'>getPitchAutocor</a></code>.</p></li>
</ul>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The ouptut of <code><a href='manualoc.html'>manualoc</a></code> or <code><a href='autodetec.html'>autodetec</a></code> can be used 
 directly without any additional modification. The function measures 29 acoustic parameters (if <code>fast = TRUE</code>) on 
 each selection in the data frame. Most parameters are produced internally by 
 <code><a href='http://www.rdocumentation.org/packages/seewave/topics/specprop'>specprop</a></code>, <code><a href='http://www.rdocumentation.org/packages/seewave/topics/fpeaks'>fpeaks</a></code>, <code><a href='http://www.rdocumentation.org/packages/seewave/topics/fund'>fund</a></code>,
 and <code><a href='http://www.rdocumentation.org/packages/seewave/topics/dfreq'>dfreq</a></code> from the package seewave and <code><a href='http://www.rdocumentation.org/packages/soundgen/topics/analyze'>analyze</a></code> 
 from the package soundgen. NAs are produced for fundamental and dominant 
 frequency measures when there are no amplitude values above the threshold. 
 Additional parameters can be provided to the internal function <code><a href='http://www.rdocumentation.org/packages/soundgen/topics/analyze'>analyze</a></code>, which measures parameters related to harmonicity.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Araya-Salas, M., &amp; Smith-Vidaurre, G. (2017). warbleR: An R package to streamline analysis of animal acoustic signals. Methods in Ecology and Evolution, 8(2), 184-191.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>{
<span class='co'># First set temporary folder</span>

<span class='fu'>data</span>(<span class='kw'>list</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"Phae.long1"</span>, <span class='st'>"Phae.long2"</span>, <span class='st'>"Phae.long3"</span>, <span class='st'>"lbh_selec_table"</span>))
<span class='fu'>writeWave</span>(<span class='no'>Phae.long1</span>,<span class='st'>"Phae.long1.wav"</span>)
<span class='fu'>writeWave</span>(<span class='no'>Phae.long2</span>,<span class='st'>"Phae.long2.wav"</span>)
<span class='fu'>writeWave</span>(<span class='no'>Phae.long3</span>,<span class='st'>"Phae.long3.wav"</span>)

<span class='co'># measure acoustic parameters</span>
<span class='no'>sp_param</span> <span class='kw'>&lt;-</span> <span class='fu'>specan</span>(<span class='kw'>X</span> <span class='kw'>=</span> <span class='no'>lbh_selec_table</span>[<span class='fl'>1</span>:<span class='fl'>8</span>,], <span class='kw'>pb</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># measuring peakf</span>
<span class='no'>sp_param</span> <span class='kw'>&lt;-</span> <span class='fu'>specan</span>(<span class='kw'>X</span> <span class='kw'>=</span> <span class='no'>lbh_selec_table</span>[<span class='fl'>1</span>:<span class='fl'>8</span>,], <span class='kw'>pb</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>fast</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># measuring harmonic-related parameters using progress bar</span>
<span class='no'>sp_param</span> <span class='kw'>&lt;-</span> <span class='fu'>specan</span>(<span class='kw'>X</span> <span class='kw'>=</span> <span class='no'>lbh_selec_table</span>[<span class='fl'>1</span>:<span class='fl'>8</span>,], <span class='kw'>harmonicity</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
}</div><div class='output co'>#&gt;    |                                                  | 0 % ~calculating     |+++++++                                           | 12% ~24s             |+++++++++++++                                     | 25% ~20s             |+++++++++++++++++++                               | 38% ~15s             |+++++++++++++++++++++++++                         | 50% ~11s             |++++++++++++++++++++++++++++++++                  | 62% ~08s             |++++++++++++++++++++++++++++++++++++++            | 75% ~05s             |++++++++++++++++++++++++++++++++++++++++++++      | 88% ~02s             |++++++++++++++++++++++++++++++++++++++++++++++++++| 100% elapsed = 18s</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Marcelo Araya-Salas (<a href='mailto:araya-salas@cornell.edu'>araya-salas@cornell.edu</a>) and Grace Smith Vidaurre

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Marcelo Araya-Salas, Grace Smith-Vidaurre.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

