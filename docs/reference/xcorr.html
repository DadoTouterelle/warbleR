<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Spectrogram cross-correlation — xcorr • warbleR</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Spectrogram cross-correlation — xcorr" />

<meta property="og:description" content="xcorr estimates the similarity of two spectrograms by means of cross-correlation" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">warbleR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.1.15</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/warbleR_workflow_01.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Import sound files and select signals&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_02.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Visual inspection and signal classification&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_03.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Acoustic (dis)similarity, coordinated singing and simulating songs&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Spectrogram cross-correlation</h1>
    
    <div class="hidden name"><code>xcorr.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>xcorr</code> estimates the similarity of two spectrograms by means of cross-correlation</p>
    
    </div>

    <pre class="usage"><span class='fu'>xcorr</span>(<span class='no'>X</span>, <span class='kw'>wl</span> <span class='kw'>=</span><span class='fl'>512</span>, <span class='kw'>frange</span><span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ovlp</span><span class='kw'>=</span><span class='fl'>90</span>, <span class='kw'>dens</span><span class='kw'>=</span><span class='fl'>0.9</span>, <span class='kw'>bp</span><span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>wn</span><span class='kw'>=</span><span class='st'>'hanning'</span>,
<span class='kw'>cor.method</span> <span class='kw'>=</span> <span class='st'>"pearson"</span>, <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>path</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>pb</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
 <span class='kw'>dfrange</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>cor.mat</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>X</th>
      <td><p>'selection_table', 'extended_selection_table' or data frame containing columns for sound files (sound.files), 
selection number (selec), and start and end time of signal (start and end).</p></td>
    </tr>
    <tr>
      <th>wl</th>
      <td><p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is 512.</p></td>
    </tr>
    <tr>
      <th>frange</th>
      <td><p>A numeric vector of length 2 setting the upper and lower frequency limits (in kHz) 
in which to compare the signals. Must be provided. The <code><a href='dfts.html'>dfts</a></code> function can be used to determine this parameter if <code>dfrange = TRUE</code>. This method is more adequate for pure tone
signals. Default is <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>ovlp</th>
      <td><p>Numeric vector of length 1 specifying % of overlap between two 
consecutive windows, as in <code><a href='http://www.rdocumentation.org/packages/seewave/topics/spectro'>spectro</a></code>. Default is 90. High values of ovlp 
slow down the function but produce more accurate results.</p></td>
    </tr>
    <tr>
      <th>dens</th>
      <td><p>Numeric vector of length 1 specifying the approximate density of points in which to sample amplitude. 
See <code>makeTemplate</code>. Deafult is 0.9.</p></td>
    </tr>
    <tr>
      <th>bp</th>
      <td><p>A numeric vector of length 2 for the lower and upper limits of a 
frequency bandpass filter (in kHz) in which to detect dominant frequency. 
Only applied when frange is <code>NULL</code>. Default is <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>wn</th>
      <td><p>A character vector of length 1 specifying the window name as in <code><a href='http://www.rdocumentation.org/packages/seewave/topics/ftwindow'>ftwindow</a></code>.</p></td>
    </tr>
    <tr>
      <th>cor.method</th>
      <td><p>A character vector of length 1 specifying the correlation method as in <code><a href='http://www.rdocumentation.org/packages/stats/topics/cor'>cor</a></code>.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>Numeric. Controls whether parallel computing is applied.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing).</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p>Character string containing the directory path where the sound files are located. 
If <code>NULL</code> (default) then the current working directory is used.</p></td>
    </tr>
    <tr>
      <th>pb</th>
      <td><p>Logical argument to control progress bar. Default is <code>TRUE</code>. Note that progress bar is not accurate as the number of pairwise comparisons decreases on 
each iteration. The first iteration runs n-1 comparisons while the last one 
only 1 (<code>n = nrow(X)</code>).</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>Logical. If <code>TRUE</code> all NAs produced when pairwise cross-correlations failed are removed from the 
results. This means that all selections with at least 1 cross-correlation that failed are excluded.</p></td>
    </tr>
    <tr>
      <th>dfrange</th>
      <td><p>Logical. If <code>TRUE</code> the <code><a href='dfts.html'>dfts</a></code> function can is used to determine the frequency range in which to compare signals.</p></td>
    </tr>
    <tr>
      <th>cor.mat</th>
      <td><p>Logical. If <code>TRUE</code> only the correlation matrix is returned. Default is <code>TRUE</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If corr.mat is <code>TRUE</code> the function returns a matrix with 
the maximum (peak) correlation for each pairwise comparison. Otherwise it will return a list that includes 1) a data frame with the correlation statistic for each "sliding" step, 2) a matrix with 
the maximum correlation for each pairwise comparison, and 3) the frequency range.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function calculates the pairwise similarity of multiple signals by means of spectrogram cross-correlation.
This method "slides" one spectrogram over the other calculating a correlation of the amplitude values at each step.
The function runs pairwise cross-correlations on several signals and returns a list including the correlation statistic
for each "sliding" step as well as the maximum (peak) correlation for each pairwise comparison. To accomplish this the margins
of the signals are expanded by half the duration of the signal both before and after the provided time coordinates. 
The correlation matrix could have NA's if some of the pairwise correlation did not work (common when sound files have been modified by band-pass filters).
This function is a modified version of the <code><a href='http://www.rdocumentation.org/packages/monitoR/topics/templateMatching'>corMatch</a></code> and <code>makeTemplate</code> 
from the awesome R package `monitoR`.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>H. Khanna, S.L.L. Gaunt &amp; D.A. McCallum (1997). Digital spectrographic 
cross-correlation: tests of sensitivity. Bioacoustics 7(3): 209-234</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='xcorr.graph.html'>xcorr.graph</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>{
<span class='co'>#First set temporary working directory</span>
<span class='co'># setwd(tempdir())</span>

<span class='co'>#load data</span>
<span class='fu'>data</span>(<span class='kw'>list</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"Phae.long1"</span>, <span class='st'>"Phae.long2"</span>, <span class='st'>"Phae.long3"</span>, <span class='st'>"Phae.long4"</span>,<span class='st'>"selec.table"</span>))
<span class='fu'>writeWave</span>(<span class='no'>Phae.long1</span>, <span class='st'>"Phae.long1.wav"</span>) <span class='co'>#save sound files</span>
<span class='fu'>writeWave</span>(<span class='no'>Phae.long2</span>, <span class='st'>"Phae.long2.wav"</span>)
<span class='fu'>writeWave</span>(<span class='no'>Phae.long3</span>, <span class='st'>"Phae.long3.wav"</span>)
<span class='fu'>writeWave</span>(<span class='no'>Phae.long4</span>, <span class='st'>"Phae.long4.wav"</span>)

<span class='no'>xcor</span> <span class='kw'>&lt;-</span> <span class='fu'>xcorr</span>(<span class='kw'>X</span> <span class='kw'>=</span> <span class='no'>selec.table</span>, <span class='kw'>wl</span> <span class='kw'>=</span> <span class='fl'>300</span>, <span class='kw'>frange</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>2</span>, <span class='fl'>9</span>), <span class='kw'>ovlp</span> <span class='kw'>=</span> <span class='fl'>90</span>,
<span class='kw'>dens</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>wn</span> <span class='kw'>=</span> <span class='st'>'hanning'</span>, <span class='kw'>cor.method</span> <span class='kw'>=</span> <span class='st'>"pearson"</span>)

}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Marcelo Araya-Salas <a href='mailto:araya-salas@cornell.edu'>araya-salas@cornell.edu</a>)

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Marcelo Araya-Salas, Grace Smith-Vidaurre.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

